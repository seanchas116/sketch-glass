{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","Background","color","this","get",2,"_interopRequireDefault","obj","__esModule","default","touchPoint","touch","_Point2","clientX","clientY","InteractionState","_Renderer","_Renderer2","_Point","_Color","_Color2","_Transform","_Transform2","_Background","_Background2","CanvasController","interactionState","None","transform","identity","initialTransform","isStroking","strokeWidth","strokeColor","renderer","background","elem","element","document","createElement","className","appendChild","addEventListener","onMouseMove","bind","onMouseDown","onMouseUp","onTouchMove","onTouchStart","onTouchEnd","onWheel","points","Pinching","pinchStartPoints","pinchStart","scale","sub","centerStart","add","mul","center","diff","merge","translation","updateTransform","update","pos","Pressed","invert","stroke","currentStroke","newStroke","width","addPoint","addStroke","ev","pressMove","pressStart","pressEnd","touches","pinchMove","map","preventDefault","pinchEnd","translate","deltaX","deltaY","./Background","./Color","./Point","./Renderer","./Transform",3,"Color","g","b","Float32Array",4,"_inherits","subClass","superClass","create","constructor","__proto__","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","undefined","Function","getOwnPropertyDescriptor","getPrototypeOf","_shader","_shader2","FillShader","_Shader","gl","sceneTransform","aPosition","getAttribLocation","program","aUVCoord","uTransform","getUniformLocation","uColor","uAntialiasEdge","enableVertexAttribArray","uniform4fv","toData","updateRadius","viewportTransform","uniformMatrix3fv","radius","m11","edge","console","log","uniform1f","./shader",5,"_util","_util2","Point","x","y","div","Math","floor","ceil","m21","dx","m12","m22","dy","other","abs","EPSILON","sqrt","./util",6,"_Stroke","_Stroke2","_FillShader","_FillShader2","Renderer","opts","strokes","isUpdateQueued","devicePixelRatio","height","getContext","alpha","antialias","depth","premultipliedAlpha","getExtension","warn","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","shader","backColor","clearColor","window","onResize","push","_this","immediate","arguments","callback","render","setImmediate","requestAnimationFrame","_this2","clear","COLOR_BUFFER_BIT","use","setTransforms","forEach","setColor","setWidth","bindBuffer","ARRAY_BUFFER","buffer","vertexAttribPointer","FLOAT","drawArrays","TRIANGLE_STRIP","polygon","innerWidth","innerHeight","dpr","viewport","./FillShader","./Stroke",7,"_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","err","Array","isArray","Stroke","type","createBuffer","point","last","normal","normalize","rotate90","toLeft","toRight","_updatePolygon","values","_ref","_ref2","xy","uv","reduce","concat","data","bufferData","STREAM_DRAW",8,"Transform","det","delta","scaleX","scaleY","_translation","s1","s2","s3","d1","d2","d3","s1s2","s1s3","d1d2","d1d3","result","negate",9,"_CanvasController","_CanvasController2","controller","body","./CanvasController","setimmediate",10,"Shader","_setup","useProgram","script","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createProgram","attachShader","_compile","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS",11,"util",12,"cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","timeout","setTimeout","len","run","clearTimeout","Item","fun","array","noop","process","nextTick","args","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask",13,"global","addFromSetImmediateArguments","tasksByHandle","nextHandle","partiallyApplied","handler","slice","runIfPresent","handle","currentlyRunningATask","task","clearImmediate","installNextTickImplementation","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","random","onGlobalMessage","event","source","indexOf","attachEvent","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","doc","documentElement","onreadystatechange","removeChild","installSetTimeoutImplementation","attachTo","toString","_process"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Background = (function () {\n    function Background(color) {\n        _classCallCheck(this, Background);\n\n        this.color = color;\n    }\n\n    _createClass(Background, [{\n        key: \"isOpaque\",\n        get: function get() {\n            return this.color.a !== 0;\n        }\n    }]);\n\n    return Background;\n})();\n\nexports[\"default\"] = Background;\nmodule.exports = exports[\"default\"];\n\n\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _Renderer = require('./Renderer');\n\nvar _Renderer2 = _interopRequireDefault(_Renderer);\n\nvar _Point = require('./Point');\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _Color = require('./Color');\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nvar _Transform = require('./Transform');\n\nvar _Transform2 = _interopRequireDefault(_Transform);\n\nvar _Background = require('./Background');\n\nvar _Background2 = _interopRequireDefault(_Background);\n\nfunction touchPoint(touch) {\n    return new _Point2['default'](touch.clientX, touch.clientY);\n}\nvar InteractionState;\n(function (InteractionState) {\n    InteractionState[InteractionState['None'] = 0] = 'None';\n    InteractionState[InteractionState['Pressed'] = 1] = 'Pressed';\n    InteractionState[InteractionState['Pinching'] = 2] = 'Pinching';\n})(InteractionState || (InteractionState = {}));\n\nvar CanvasController = (function () {\n    function CanvasController() {\n        _classCallCheck(this, CanvasController);\n\n        this.interactionState = InteractionState.None;\n        this.transform = _Transform2['default'].identity();\n        this.initialTransform = _Transform2['default'].identity();\n        this.isStroking = false;\n        this.strokeWidth = 10;\n        this.strokeColor = new _Color2['default'](0, 0, 0, 1);\n        this.renderer = new _Renderer2['default']({ background: new _Background2['default'](new _Color2['default'](255, 255, 255, 1)) });\n        var elem = this.element = document.createElement('div');\n        elem.className = 'canvas-area';\n        elem.appendChild(this.renderer.element);\n        elem.addEventListener('mousemove', this.onMouseMove.bind(this));\n        elem.addEventListener('mousedown', this.onMouseDown.bind(this));\n        elem.addEventListener('mouseup', this.onMouseUp.bind(this));\n        elem.addEventListener('touchmove', this.onTouchMove.bind(this));\n        elem.addEventListener('touchstart', this.onTouchStart.bind(this));\n        elem.addEventListener('touchend', this.onTouchEnd.bind(this));\n        elem.addEventListener('wheel', this.onWheel.bind(this));\n    }\n\n    _createClass(CanvasController, [{\n        key: 'pinchStart',\n        value: function pinchStart(points) {\n            this.interactionState = InteractionState.Pinching;\n            this.pinchStartPoints = points;\n            this.initialTransform = this.transform;\n        }\n    }, {\n        key: 'pinchMove',\n        value: function pinchMove(points) {\n            if (this.interactionState !== InteractionState.Pinching) {\n                this.pinchStart(points);\n            }\n            var scale = points[0].sub(points[1]).length / this.pinchStartPoints[0].sub(this.pinchStartPoints[1]).length;\n            var centerStart = this.pinchStartPoints[0].add(this.pinchStartPoints[1]).mul(0.5);\n            var center = points[0].add(points[1]).mul(0.5);\n            var diff = center.sub(centerStart.mul(scale));\n            var transform = _Transform2['default'].scale(scale, scale).merge(_Transform2['default'].translation(diff));\n            var transform = this.initialTransform.merge(transform);\n            this.updateTransform(transform);\n            this.renderer.update();\n        }\n    }, {\n        key: 'pinchEnd',\n        value: function pinchEnd() {\n            this.interactionState = InteractionState.None;\n        }\n    }, {\n        key: 'pressStart',\n        value: function pressStart(pos) {\n            this.interactionState = InteractionState.Pressed;\n            pos = pos.transform(this.transform.invert());\n            var stroke = this.currentStroke = this.renderer.newStroke();\n            stroke.width = this.strokeWidth;\n            stroke.color = this.strokeColor;\n            stroke.addPoint(pos);\n            this.renderer.addStroke(stroke);\n            this.renderer.update(true);\n        }\n    }, {\n        key: 'pressMove',\n        value: function pressMove(pos) {\n            if (this.interactionState === InteractionState.Pressed) {\n                pos = pos.transform(this.transform.invert());\n                this.currentStroke.addPoint(pos);\n                this.renderer.update(true);\n            }\n        }\n    }, {\n        key: 'pressEnd',\n        value: function pressEnd() {\n            if (this.interactionState === InteractionState.Pressed) {\n                this.interactionState = InteractionState.None;\n            }\n        }\n    }, {\n        key: 'updateTransform',\n        value: function updateTransform(transform) {\n            this.transform = transform;\n            this.renderer.transform = transform;\n        }\n    }, {\n        key: 'onMouseMove',\n        value: function onMouseMove(ev) {\n            this.pressMove(new _Point2['default'](ev.clientX, ev.clientY));\n        }\n    }, {\n        key: 'onMouseDown',\n        value: function onMouseDown(ev) {\n            this.pressStart(new _Point2['default'](ev.clientX, ev.clientY));\n        }\n    }, {\n        key: 'onMouseUp',\n        value: function onMouseUp(ev) {\n            this.pressEnd();\n        }\n    }, {\n        key: 'onTouchMove',\n        value: function onTouchMove(ev) {\n            if (ev.touches.length === 1) {\n                var touch = ev.touches[0];\n                this.pressMove(touchPoint(touch));\n            } else if (ev.touches.length === 2) {\n                this.pinchMove([0, 1].map(function (i) {\n                    return touchPoint(ev.touches[i]);\n                }));\n            }\n            ev.preventDefault();\n        }\n    }, {\n        key: 'onTouchStart',\n        value: function onTouchStart(ev) {\n            if (ev.touches.length === 1) {\n                var touch = ev.touches[0];\n                this.pressStart(touchPoint(touch));\n            } else if (ev.touches.length === 2) {\n                this.pinchStart([0, 1].map(function (i) {\n                    return touchPoint(ev.touches[i]);\n                }));\n            }\n            ev.preventDefault();\n        }\n    }, {\n        key: 'onTouchEnd',\n        value: function onTouchEnd(ev) {\n            this.pressEnd();\n            this.pinchEnd();\n            ev.preventDefault();\n        }\n    }, {\n        key: 'onWheel',\n        value: function onWheel(ev) {\n            var transform = this.transform.translate(new _Point2['default'](-ev.deltaX, -ev.deltaY));\n            this.updateTransform(transform);\n            this.renderer.update();\n            ev.preventDefault();\n        }\n    }]);\n\n    return CanvasController;\n})();\n\nexports['default'] = CanvasController;\nmodule.exports = exports['default'];\n\n\n\n},{\"./Background\":1,\"./Color\":3,\"./Point\":5,\"./Renderer\":6,\"./Transform\":8}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Color = (function () {\n    function Color(r, g, b, a) {\n        _classCallCheck(this, Color);\n\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    _createClass(Color, [{\n        key: \"toString\",\n        value: function toString() {\n            return \"rgba(\" + this.r + \", \" + this.g + \", \" + this.b + \", \" + this.a + \")\";\n        }\n    }, {\n        key: \"toData\",\n        value: function toData() {\n            return new Float32Array([this.r, this.g, this.b, this.a]);\n        }\n    }]);\n\n    return Color;\n})();\n\nexports[\"default\"] = Color;\nmodule.exports = exports[\"default\"];\n\n\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\nvar _shader = require('./shader');\n\nvar _shader2 = _interopRequireDefault(_shader);\n\nvar _Transform = require('./Transform');\n\nvar _Transform2 = _interopRequireDefault(_Transform);\n\nvar FillShader = (function (_Shader) {\n    function FillShader(gl) {\n        _classCallCheck(this, FillShader);\n\n        _get(Object.getPrototypeOf(FillShader.prototype), 'constructor', this).call(this, gl);\n        this.width = 0;\n        this.sceneTransform = _Transform2['default'].identity();\n        this.aPosition = gl.getAttribLocation(this.program, 'aPosition');\n        this.aUVCoord = gl.getAttribLocation(this.program, 'aUVCoord');\n        this.uTransform = gl.getUniformLocation(this.program, 'uTransform');\n        this.uColor = gl.getUniformLocation(this.program, 'uColor');\n        this.uAntialiasEdge = gl.getUniformLocation(this.program, 'uAntialiasEdge');\n        gl.enableVertexAttribArray(this.aPosition);\n        gl.enableVertexAttribArray(this.aUVCoord);\n    }\n\n    _inherits(FillShader, _Shader);\n\n    _createClass(FillShader, [{\n        key: 'setColor',\n        value: function setColor(color) {\n            this.gl.uniform4fv(this.uColor, color.toData());\n        }\n    }, {\n        key: 'setWidth',\n        value: function setWidth(width) {\n            this.width = width;\n            this.updateRadius();\n        }\n    }, {\n        key: 'setTransforms',\n        value: function setTransforms(viewportTransform, sceneTransform) {\n            this.sceneTransform = sceneTransform;\n            var transform = sceneTransform.merge(viewportTransform);\n            this.gl.uniformMatrix3fv(this.uTransform, false, transform.toData());\n            this.updateRadius();\n        }\n    }, {\n        key: 'updateRadius',\n        value: function updateRadius() {\n            var radius = this.width * this.sceneTransform.m11 * 0.5;\n            var edge = (radius - 1) / radius;\n            console.log('radius: ' + radius);\n            console.log('edge: ' + edge);\n            this.gl.uniform1f(this.uAntialiasEdge, edge);\n        }\n    }, {\n        key: 'vertexShader',\n        get: function get() {\n            return '\\n      uniform mat3 uTransform;\\n      attribute vec2 aPosition;\\n      attribute vec2 aUVCoord;\\n      varying vec2 vUVCoord;\\n      void main(void) {\\n        vUVCoord = aUVCoord;\\n        vec3 pos = uTransform * vec3(aPosition, 1.0);\\n        gl_Position = vec4(pos.xy, 0.0, 1.0);\\n      }\\n    ';\n        }\n    }, {\n        key: 'fragmentShader',\n        get: function get() {\n            return '\\n      precision mediump float;\\n      uniform vec4 uColor;\\n      uniform float uAntialiasEdge;\\n      varying highp vec2 vUVCoord;\\n      void main(void) {\\n        float dist = length(vUVCoord);\\n        float alpha = 1.0 - smoothstep(uAntialiasEdge, 1.0, dist);\\n        gl_FragColor = uColor * alpha;\\n      }\\n    ';\n        }\n    }]);\n\n    return FillShader;\n})(_shader2['default']);\n\nexports['default'] = FillShader;\nmodule.exports = exports['default'];\n\n\n\n},{\"./Transform\":8,\"./shader\":10}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _util = require(\"./util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar Point = (function () {\n    function Point(x, y) {\n        _classCallCheck(this, Point);\n\n        this.x = x;\n        this.y = y;\n    }\n\n    _createClass(Point, [{\n        key: \"add\",\n        value: function add(a) {\n            return new Point(this.x + a.x, this.y + a.y);\n        }\n    }, {\n        key: \"sub\",\n        value: function sub(a) {\n            return new Point(this.x - a.x, this.y - a.y);\n        }\n    }, {\n        key: \"mul\",\n        value: function mul(a) {\n            return new Point(this.x * a, this.y * a);\n        }\n    }, {\n        key: \"div\",\n        value: function div(a) {\n            return new Point(this.x / a, this.y / a);\n        }\n    }, {\n        key: \"negate\",\n        value: function negate() {\n            return new Point(-this.x, -this.y);\n        }\n    }, {\n        key: \"rotate90\",\n        value: function rotate90() {\n            return new Point(-this.y, this.x);\n        }\n    }, {\n        key: \"rotate270\",\n        value: function rotate270() {\n            return new Point(this.y, -this.x);\n        }\n    }, {\n        key: \"normalize\",\n        value: function normalize() {\n            return this.div(this.length);\n        }\n    }, {\n        key: \"midpoint\",\n        value: function midpoint(a) {\n            return this.add(a).mul(0.5);\n        }\n    }, {\n        key: \"dot\",\n        value: function dot(a) {\n            return this.x * a.x + this.y * a.y;\n        }\n    }, {\n        key: \"lengthSquare\",\n        value: function lengthSquare() {\n            return this.length * this.length;\n        }\n    }, {\n        key: \"floor\",\n        value: function floor() {\n            return new Point(Math.floor(this.x), Math.floor(this.y));\n        }\n    }, {\n        key: \"ceil\",\n        value: function ceil() {\n            return new Point(Math.ceil(this.x), Math.ceil(this.y));\n        }\n    }, {\n        key: \"transform\",\n        value: function transform(t) {\n            var x = t.m11 * this.x + t.m21 * this.y + t.dx;\n            var y = t.m12 * this.x + t.m22 * this.y + t.dy;\n            return new Point(x, y);\n        }\n    }, {\n        key: \"toString\",\n        value: function toString() {\n            return \"Point(\" + this.x + \",\" + this.y + \")\";\n        }\n    }, {\n        key: \"equals\",\n        value: function equals(other) {\n            return this.x === other.x && this.y === other.y;\n        }\n    }, {\n        key: \"fuzzyEquals\",\n        value: function fuzzyEquals(other) {\n            return Math.abs(this.x - other.x) < _util2[\"default\"].EPSILON && Math.abs(this.y - other.y) < _util2[\"default\"].EPSILON;\n        }\n    }, {\n        key: \"length\",\n        get: function get() {\n            return Math.sqrt(this.x * this.x + this.y * this.y);\n        }\n    }]);\n\n    return Point;\n})();\n\nexports[\"default\"] = Point;\nmodule.exports = exports[\"default\"];\n\n\n\n},{\"./util\":11}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _Point = require('./Point');\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _Transform = require('./Transform');\n\nvar _Transform2 = _interopRequireDefault(_Transform);\n\nvar _Stroke = require('./Stroke');\n\nvar _Stroke2 = _interopRequireDefault(_Stroke);\n\nvar _FillShader = require('./FillShader');\n\nvar _FillShader2 = _interopRequireDefault(_FillShader);\n\nvar TILE_SIZE = 128;\n\nvar Renderer = (function () {\n    function Renderer(opts) {\n        _classCallCheck(this, Renderer);\n\n        this.element = document.createElement('canvas');\n        this.strokes = [];\n        this.isUpdateQueued = false;\n        this.devicePixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.transform = _Transform2['default'].identity();\n        var gl = this.gl = this.element.getContext('webgl', {\n            alpha: false,\n            antialias: false,\n            depth: false,\n            premultipliedAlpha: true\n        });\n        if (!gl.getExtension('OES_standard_derivatives')) {\n            console.warn('OES_standard_derivatives not supported');\n        }\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        this.shader = new _FillShader2['default'](gl);\n        this.background = opts.background;\n        var backColor = this.background.color;\n        gl.clearColor(backColor.r, backColor.g, backColor.b, backColor.a);\n        this.element.className = 'canvas-area__renderer';\n        window.addEventListener('resize', this.onResize.bind(this));\n        this.onResize();\n    }\n\n    _createClass(Renderer, [{\n        key: 'addStroke',\n        value: function addStroke(stroke) {\n            this.strokes.push(stroke);\n        }\n    }, {\n        key: 'newStroke',\n        value: function newStroke() {\n            return new _Stroke2['default'](this.gl);\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            var _this = this;\n\n            var immediate = arguments[0] === undefined ? false : arguments[0];\n\n            if (!this.isUpdateQueued) {\n                this.isUpdateQueued = true;\n                var callback = function callback() {\n                    _this.render();\n                    _this.isUpdateQueued = false;\n                };\n                if (immediate) {\n                    setImmediate(callback);\n                } else {\n                    requestAnimationFrame(callback);\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var gl = this.gl;\n            var shader = this.shader;\n            gl.clear(gl.COLOR_BUFFER_BIT);\n            shader.use();\n            shader.setTransforms(this.viewportTransform, this.transform);\n            this.strokes.forEach(function (stroke) {\n                shader.setColor(stroke.color);\n                shader.setWidth(stroke.width * _this2.transform.m11);\n                gl.bindBuffer(gl.ARRAY_BUFFER, stroke.buffer);\n                gl.vertexAttribPointer(_this2.shader.aPosition, 2, gl.FLOAT, false, 16, 0);\n                gl.vertexAttribPointer(_this2.shader.aUVCoord, 2, gl.FLOAT, false, 16, 8);\n                gl.drawArrays(gl.TRIANGLE_STRIP, 0, stroke.polygon.length);\n            });\n        }\n    }, {\n        key: 'onResize',\n        value: function onResize() {\n            var width = this.width = window.innerWidth;\n            var height = this.height = window.innerHeight;\n            var dpr = this.devicePixelRatio = window.devicePixelRatio || 1;\n            this.viewportTransform = _Transform2['default'].scale(2 / width, 2 / height).translate(new _Point2['default'](-1, -1)).scale(1, -1);\n            this.element.width = width * dpr;\n            this.element.height = height * dpr;\n            this.gl.viewport(0, 0, width * dpr, height * dpr);\n            console.log('resized to ' + width + ' * ' + height + ', pixel ratio ' + devicePixelRatio);\n            this.update();\n        }\n    }]);\n\n    return Renderer;\n})();\n\nexports['default'] = Renderer;\nmodule.exports = exports['default'];\n\n\n\n},{\"./FillShader\":4,\"./Point\":5,\"./Stroke\":7,\"./Transform\":8}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _Point = require('./Point');\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _Color = require('./Color');\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nvar Stroke = (function () {\n    function Stroke(gl) {\n        _classCallCheck(this, Stroke);\n\n        this.points = [];\n        this.color = new _Color2['default'](0, 0, 0, 1);\n        this.width = 1;\n        this.type = 'pen';\n        this.polygon = [];\n        this.gl = gl;\n        this.buffer = gl.createBuffer();\n    }\n\n    _createClass(Stroke, [{\n        key: 'addPoint',\n        value: function addPoint(point) {\n            this.points.push(point);\n            if (this.points.length >= 2) {\n                var last = this.points[this.points.length - 2];\n                var normal = point.sub(last).normalize().rotate90();\n                var toLeft = normal.mul(this.width / 2);\n                var toRight = normal.mul(-this.width / 2);\n                this.polygon.push([last.add(toLeft), new _Point2['default'](-1, 0)]);\n                this.polygon.push([last.add(toRight), new _Point2['default'](1, 0)]);\n                this.polygon.push([point.add(toLeft), new _Point2['default'](-1, 0)]);\n                this.polygon.push([point.add(toRight), new _Point2['default'](1, 0)]);\n            }\n            this._updatePolygon();\n        }\n    }, {\n        key: '_updatePolygon',\n        value: function _updatePolygon() {\n            var values = this.polygon.map(function (_ref) {\n                var _ref2 = _slicedToArray(_ref, 2);\n\n                var xy = _ref2[0];\n                var uv = _ref2[1];\n                return [xy.x, xy.y, uv.x, uv.y];\n            }).reduce(function (a, b) {\n                return a.concat(b);\n            }, []);\n            var data = new Float32Array(values);\n            var gl = this.gl;\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n            gl.bufferData(gl.ARRAY_BUFFER, data, gl.STREAM_DRAW);\n        }\n    }]);\n\n    return Stroke;\n})();\n\nexports['default'] = Stroke;\nmodule.exports = exports['default'];\n\n\n\n},{\"./Color\":3,\"./Point\":5}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Transform = (function () {\n    function Transform(m11, m12, m21, m22, dx, dy) {\n        _classCallCheck(this, Transform);\n\n        this.m11 = m11;\n        this.m12 = m12;\n        this.m21 = m21;\n        this.m22 = m22;\n        this.dx = dx;\n        this.dy = dy;\n    }\n\n    _createClass(Transform, [{\n        key: \"merge\",\n        value: function merge(other) {\n            var m11 = other.m11 * this.m11 + other.m21 * this.m12;\n            var m21 = other.m11 * this.m21 + other.m21 * this.m22;\n            var m12 = other.m12 * this.m11 + other.m22 * this.m12;\n            var m22 = other.m12 * this.m21 + other.m22 * this.m22;\n            var dx = other.m11 * this.dx + other.m21 * this.dy + other.dx;\n            var dy = other.m12 * this.dx + other.m22 * this.dy + other.dy;\n            return new Transform(m11, m12, m21, m22, dx, dy);\n        }\n    }, {\n        key: \"invert\",\n        value: function invert() {\n            var det = this.m11 * this.m22 - this.m12 * this.m21;\n            var m11 = this.m22 / det;\n            var m12 = -this.m12 / det;\n            var m21 = -this.m21 / det;\n            var m22 = this.m11 / det;\n            var dx = -(m11 * this.dx + m21 * this.dy);\n            var dy = -(m12 * this.dx + m22 * this.dy);\n            return new Transform(m11, m12, m21, m22, dx, dy);\n        }\n    }, {\n        key: \"translate\",\n        value: function translate(delta) {\n            return new Transform(this.m11, this.m12, this.m21, this.m22, this.dx + delta.x, this.dy + delta.y);\n        }\n    }, {\n        key: \"scale\",\n        value: function scale(scaleX, scaleY) {\n            return new Transform(this.m11 * scaleX, this.m12 * scaleX, this.m21 * scaleY, this.m22 * scaleY, this.dx * scaleX, this.dy * scaleY);\n        }\n    }, {\n        key: \"toData\",\n        value: function toData() {\n            return new Float32Array([this.m11, this.m12, 0, this.m21, this.m22, 0, this.dx, this.dy, 1]);\n        }\n    }, {\n        key: \"toString\",\n        value: function toString() {\n            return \"Transform([\" + this.m11 + \",\" + this.m12 + \"],[\" + this.m21 + \",\" + this.m22 + \"],[\" + this.dx + \",\" + this.dy + \"])\";\n        }\n    }], [{\n        key: \"identity\",\n        value: function identity() {\n            return new Transform(1, 0, 0, 1, 0, 0);\n        }\n    }, {\n        key: \"scale\",\n        value: function scale(scaleX, scaleY) {\n            return new Transform(scaleX, 0, 0, scaleY, 0, 0);\n        }\n    }, {\n        key: \"translation\",\n        value: function translation(_translation) {\n            return new Transform(1, 0, 0, 1, _translation.x, _translation.y);\n        }\n    }, {\n        key: \"fromPoints\",\n        value: function fromPoints(s1, s2, s3, d1, d2, d3) {\n            var s1s2 = s2.sub(s1);\n            var s1s3 = s3.sub(s1);\n            var d1d2 = d2.sub(d1);\n            var d1d3 = d3.sub(d1);\n            var result = Transform.translation(s1.negate()).merge(new Transform(s1s2.x, s1s2.y, s1s3.x, s1s3.y, 0, 0).invert()).merge(new Transform(d1d2.x, d1d2.y, d1d3.x, d1d3.y, 0, 0)).merge(Transform.translation(d1));\n            return result;\n        }\n    }]);\n\n    return Transform;\n})();\n\nexports[\"default\"] = Transform;\nmodule.exports = exports[\"default\"];\n\n\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _CanvasController = require('./CanvasController');\n\nvar _CanvasController2 = _interopRequireDefault(_CanvasController);\n\nrequire('setimmediate');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    var controller = new _CanvasController2['default']();\n    document.body.appendChild(controller.element);\n});\n\n\n},{\"./CanvasController\":2,\"setimmediate\":13}],10:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Shader = (function () {\n    function Shader(gl) {\n        _classCallCheck(this, Shader);\n\n        this.gl = gl;\n        this._setup();\n    }\n\n    _createClass(Shader, [{\n        key: \"use\",\n        value: function use() {\n            this.gl.useProgram(this.program);\n        }\n    }, {\n        key: \"_compile\",\n        value: function _compile(script, type) {\n            var gl = this.gl;\n            var shader = gl.createShader(type);\n            gl.shaderSource(shader, script);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                console.warn(\"An error occurred compiling the shaders\");\n                console.warn(gl.getShaderInfoLog(shader));\n                return null;\n            }\n            return shader;\n        }\n    }, {\n        key: \"_setup\",\n        value: function _setup() {\n            var gl = this.gl;\n            var program = this.program = gl.createProgram();\n            gl.attachShader(program, this._compile(this.vertexShader, gl.VERTEX_SHADER));\n            gl.attachShader(program, this._compile(this.fragmentShader, gl.FRAGMENT_SHADER));\n            gl.linkProgram(program);\n            if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n                console.warn(\"Failed to link shader program\");\n            }\n            gl.useProgram(program);\n        }\n    }, {\n        key: \"vertexShader\",\n        get: function get() {\n            throw new Error(\"vertex shader not specified\");\n        }\n    }, {\n        key: \"fragmentShader\",\n        get: function get() {\n            throw new Error(\"fragment shader not specified\");\n        }\n    }]);\n\n    return Shader;\n})();\n\nexports[\"default\"] = Shader;\nmodule.exports = exports[\"default\"];\n\n\n\n},{}],11:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar util = {\n    EPSILON: 1.19209290e-7\n};\nexports[\"default\"] = util;\n\n\nmodule.exports = exports[\"default\"];\n\n},{}],12:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],13:[function(require,module,exports){\n(function (process){\n(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var setImmediate;\n\n    function addFromSetImmediateArguments(args) {\n        tasksByHandle[nextHandle] = partiallyApplied.apply(undefined, args);\n        return nextHandle++;\n    }\n\n    // This function accepts the same arguments as setImmediate, but\n    // returns a function that requires no arguments.\n    function partiallyApplied(handler) {\n        var args = [].slice.call(arguments, 1);\n        return function() {\n            if (typeof handler === \"function\") {\n                handler.apply(undefined, args);\n            } else {\n                (new Function(\"\" + handler))();\n            }\n        };\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(partiallyApplied(runIfPresent, handle), 0);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    task();\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function installNextTickImplementation() {\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            process.nextTick(partiallyApplied(runIfPresent, handle));\n            return handle;\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            global.postMessage(messagePrefix + handle, \"*\");\n            return handle;\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            channel.port2.postMessage(handle);\n            return handle;\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n            return handle;\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            setTimeout(partiallyApplied(runIfPresent, handle), 0);\n            return handle;\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(new Function(\"return this\")()));\n\n}).call(this,require('_process'))\n},{\"_process\":12}]},{},[9]);\n"],"sourceRoot":"/source/"}